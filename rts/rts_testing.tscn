[gd_scene load_steps=15 format=3 uid="uid://cpemfc0rdiy6m"]

[ext_resource type="PackedScene" uid="uid://vrhfvn7c57ch" path="res://assets/maps/swampypeasants.map" id="1_u5aq2"]
[ext_resource type="PackedScene" uid="uid://d0ficf5tu0gyc" path="res://rts/rts_interface.tscn" id="2_a31ti"]
[ext_resource type="Script" uid="uid://c3vowodir5ulx" path="res://rts/unit_data.gd" id="3_st76l"]
[ext_resource type="PackedScene" uid="uid://5fnsoo8vcjv" path="res://rts/units/unit_charlie.tscn" id="4_o40yq"]
[ext_resource type="PackedScene" uid="uid://cj51aalk4jx75" path="res://rts/units/unit_blockade.tscn" id="5_ipmlp"]
[ext_resource type="PackedScene" uid="uid://b5odt3mvxcsai" path="res://character.tscn" id="6_o40yq"]

[sub_resource type="GDScript" id="GDScript_o40yq"]
script/source = "extends Node3D

func _input(event: InputEvent) -> void:
	if event.is_action_pressed(&\"ui_home\"):
		$Swampypeasants/NavigationRegion3D.bake_navigation_mesh()
	
"

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_57qqc"]
sky_top_color = Color(0.299215, 0.353435, 0.261361, 1)
sky_horizon_color = Color(0.134538, 0.227119, 0.0926284, 1)
ground_bottom_color = Color(0.159276, 0.191188, 0.0442958, 1)
ground_horizon_color = Color(0.652734, 0.677962, 0.665239, 1)

[sub_resource type="Sky" id="Sky_xia41"]
sky_material = SubResource("ProceduralSkyMaterial_57qqc")

[sub_resource type="Environment" id="Environment_7f4sk"]
background_mode = 2
sky = SubResource("Sky_xia41")
tonemap_mode = 2
glow_enabled = true
fog_mode = 1
fog_density = 1.0
fog_sky_affect = 0.389
fog_depth_curve = 0.341511
fog_depth_begin = 5.0

[sub_resource type="GDScript" id="GDScript_pdplg"]
script/source = "extends OmniLight3D

@export var flicker := 15

func _process(delta: float) -> void:
	if randi() % flicker == 0:
		hide()
	else:
		show()
	
"

[sub_resource type="NavigationMesh" id="NavigationMesh_u5aq2"]
vertices = PackedVector3Array(-14.7, 0.0999999, -1.65, -6.3, 0.0999999, -1.65, -6.3, 0.0999999, -2.85, -2.85, 0.0999999, -6.3, -1.65, 0.0999999, -6.3, -1.65, 0.0999999, -14.7, -14.7, 0.0999999, -14.7, 1.65, 0.0999999, -6.3, 1.65, 0.0999999, -14.7, 6.45, 0.0999999, -2.7, 6.45, 0.0999999, -1.8, 14.7, 0.0999999, -1.95, 2.85, 0.0999999, -6.3, 14.7, 0.0999999, -14.7, -1.65, 1.1, -5.4, -1.65, 1.1, -5.7, -2.55, 1.1, -5.7, -2.4, 1.1, -4.95, -1.95, 1.1, -3.6, -3.6, 1.1, -1.95, -3.6, 1.1, -1.2, -1.35, 1.1, -1.05, -1.05, 1.1, -1.35, -1.2, 1.1, -3.6, -5.7, 1.1, -2.55, -5.7, 1.1, -1.65, -5.4, 1.1, -1.65, -4.95, 1.1, -2.4, -4.05, 1.1, -2.4, -2.4, 1.1, -4.05, -2.55, 7.1, -5.7, -5.7, 7.1, -2.55, -5.4, 7.1, -2.4, -2.4, 7.1, -5.4, -5.7, 7.1, 2.55, -2.55, 7.1, 5.7, -2.4, 7.1, 5.4, -5.4, 7.1, 2.4, 2.55, 7.1, -5.7, 2.4, 7.1, -5.4, 5.7, 7.1, -2.55, 5.4, 7.1, -2.4, 5.4, 7.1, 2.4, 2.4, 7.1, 5.4, 2.55, 7.1, 5.7, 5.7, 7.1, 2.55, -1.05, 1.1, -5.4, 5.4, 1.1, -1.65, 5.7, 1.1, -1.65, 5.7, 1.1, -2.55, 4.95, 1.1, -2.4, 2.55, 1.1, -5.7, 1.05, 1.1, -5.4, 1.95, 1.1, -5.4, -0.599999, 1.1, -4.95, -0.599999, 1.1, -4.2, 0.6, 1.1, -4.2, 0.6, 1.1, -4.95, 2.4, 1.1, -4.05, 4.05, 1.1, -2.4, 2.4, 1.1, -4.95, 1.95, 1.1, -3.6, 3.6, 1.1, -1.95, -2.1, 8.1, -4.8, -4.8, 8.1, -2.1, -4.35, 8.1, -1.95, -1.95, 8.1, -4.35, -4.8, 8.1, 2.1, -2.1, 8.1, 4.8, -1.95, 8.1, 4.35, -4.35, 8.1, 1.95, 2.1, 8.1, -4.8, 1.95, 8.1, -4.35, 4.8, 8.1, -2.1, 4.35, 8.1, -1.95, 4.35, 8.1, 1.95, 1.95, 8.1, 4.35, 2.1, 8.1, 4.8, 4.8, 8.1, 2.1, 1.05, 1.1, -3.6, 9.53674e-07, 1.1, -1.35, 0.450001, 1.1, -0.749999, 3.6, 1.1, -1.2, -1.65, 9.1, -3.75, -3.75, 9.1, -1.65, -2.4, 9.1, -1.05, -1.05, 9.1, -2.4, -3.75, 9.1, 1.65, -1.65, 9.1, 3.75, -1.05, 9.1, 2.4, -2.4, 9.1, 1.05, 1.65, 9.1, -3.75, 1.05, 9.1, -2.4, 3.75, 9.1, -1.65, 2.4, 9.1, -1.05, 2.4, 9.1, 1.05, 1.05, 9.1, 2.4, 1.65, 9.1, 3.75, 3.75, 9.1, 1.65, 6.45, 0.0999999, 1.8, 14.7, 0.0999999, 1.95, -0.749999, 10.1, -1.8, -1.8, 10.1, -0.749999, -1.35, 10.1, -0.749999, -0.749999, 10.1, -1.35, -1.8, 10.1, 0.750001, -0.749999, 10.1, 1.8, -0.749999, 10.1, 1.35, -1.35, 10.1, 0.750001, 0.750001, 10.1, -1.8, 0.750001, 10.1, -1.35, 1.8, 10.1, -0.749999, 1.35, 10.1, -0.749999, 1.35, 10.1, 0.750001, 0.750001, 10.1, 1.35, 0.750001, 10.1, 1.8, 1.8, 10.1, 0.750001, -14.7, 0.0999999, 1.65, -6.3, 0.0999999, 1.65, 1.65, 1.1, 5.7, 1.65, 1.1, 5.4, 1.05, 1.1, 5.4, -5.4, 1.1, -1.05, 0.6, 1.1, 4.95, 0.6, 1.1, 4.2, -0.599999, 1.1, 4.2, -0.599999, 1.1, 4.95, -2.55, 1.1, 5.7, -1.95, 1.1, 5.4, -2.4, 1.1, 4.95, -4.95, 1.1, 0.6, -4.2, 1.1, 0.6, -4.2, 1.1, -0.599999, -4.95, 1.1, -0.599999, -1.05, 1.1, 5.4, -5.4, 1.1, 1.05, -5.4, 1.1, 1.95, -5.7, 1.1, 2.55, -2.4, 1.1, 4.05, -4.05, 1.1, 2.4, -4.95, 1.1, 2.4, -1.8, 1.1, 3.6, -3.6, 1.1, 1.8, 5.4, 1.1, -1.05, 2.55, 1.1, 5.7, 2.4, 1.1, 4.95, 5.7, 1.1, 2.55, 5.4, 1.1, 1.05, 5.4, 1.1, 1.95, 4.2, 1.1, -0.599999, 4.2, 1.1, 0.6, 4.95, 1.1, 0.6, 4.95, 1.1, -0.599999, 4.05, 1.1, 2.4, 2.4, 1.1, 4.05, 4.95, 1.1, 2.4, 3.6, 1.1, 1.8, 1.8, 1.1, 3.6, -3.6, 1.1, 1.05, -1.35, 1.1, 9.53674e-07, -1.2, 1.1, 3.6, -0.749999, 1.1, 0.450001, 1.05, 1.1, 3.6, 9.53674e-07, 1.1, 0.450001, 3.6, 1.1, 1.05, 0.450001, 1.1, 9.53674e-07, -0.749999, 3.1, -0.749999, -0.749999, 3.1, -0.299999, -0.299999, 3.1, -0.299999, -0.299999, 3.1, -0.749999, -1.95, 0.0999999, 14.7, -1.8, 0.0999999, 6.45, -2.7, 0.0999999, 6.45, -6.3, 0.0999999, 2.85, -14.7, 0.0999999, 14.7, 6.45, 0.0999999, 2.7, 2.7, 0.0999999, 6.45, 1.8, 0.0999999, 6.45, 1.95, 0.0999999, 14.7, 14.7, 0.0999999, 14.7)
polygons = [PackedInt32Array(2, 1, 0), PackedInt32Array(5, 4, 3), PackedInt32Array(2, 0, 3), PackedInt32Array(3, 0, 5), PackedInt32Array(5, 0, 6), PackedInt32Array(5, 8, 4), PackedInt32Array(4, 8, 7), PackedInt32Array(9, 11, 10), PackedInt32Array(12, 7, 8), PackedInt32Array(9, 12, 11), PackedInt32Array(11, 12, 8), PackedInt32Array(11, 8, 13), PackedInt32Array(15, 14, 16), PackedInt32Array(16, 14, 17), PackedInt32Array(21, 20, 22), PackedInt32Array(22, 20, 19), PackedInt32Array(22, 19, 18), PackedInt32Array(22, 18, 23), PackedInt32Array(25, 24, 26), PackedInt32Array(26, 24, 27), PackedInt32Array(29, 18, 28), PackedInt32Array(28, 18, 19), PackedInt32Array(27, 24, 28), PackedInt32Array(28, 24, 29), PackedInt32Array(29, 24, 17), PackedInt32Array(17, 24, 16), PackedInt32Array(33, 32, 30), PackedInt32Array(30, 32, 31), PackedInt32Array(36, 35, 37), PackedInt32Array(37, 35, 34), PackedInt32Array(39, 33, 38), PackedInt32Array(38, 33, 30), PackedInt32Array(37, 34, 32), PackedInt32Array(32, 34, 31), PackedInt32Array(41, 39, 40), PackedInt32Array(40, 39, 38), PackedInt32Array(42, 45, 43), PackedInt32Array(43, 45, 44), PackedInt32Array(42, 41, 45), PackedInt32Array(45, 41, 40), PackedInt32Array(36, 43, 35), PackedInt32Array(35, 43, 44), PackedInt32Array(46, 14, 15), PackedInt32Array(48, 47, 49), PackedInt32Array(49, 47, 50), PackedInt32Array(53, 52, 51), PackedInt32Array(57, 56, 54), PackedInt32Array(54, 56, 55), PackedInt32Array(46, 15, 52), PackedInt32Array(52, 15, 51), PackedInt32Array(50, 59, 49), PackedInt32Array(49, 59, 58), PackedInt32Array(49, 58, 60), PackedInt32Array(49, 60, 51), PackedInt32Array(54, 46, 57), PackedInt32Array(57, 46, 52), PackedInt32Array(60, 53, 51), PackedInt32Array(59, 62, 58), PackedInt32Array(58, 62, 61), PackedInt32Array(66, 65, 63), PackedInt32Array(63, 65, 64), PackedInt32Array(70, 69, 67), PackedInt32Array(67, 69, 68), PackedInt32Array(72, 66, 71), PackedInt32Array(71, 66, 63), PackedInt32Array(70, 67, 65), PackedInt32Array(65, 67, 64), PackedInt32Array(72, 71, 74), PackedInt32Array(74, 71, 73), PackedInt32Array(75, 78, 76), PackedInt32Array(76, 78, 77), PackedInt32Array(75, 74, 78), PackedInt32Array(78, 74, 73), PackedInt32Array(69, 76, 68), PackedInt32Array(68, 76, 77), PackedInt32Array(56, 79, 55), PackedInt32Array(55, 79, 23), PackedInt32Array(23, 79, 80), PackedInt32Array(23, 80, 22), PackedInt32Array(62, 82, 61), PackedInt32Array(61, 82, 79), PackedInt32Array(79, 82, 80), PackedInt32Array(80, 82, 81), PackedInt32Array(86, 85, 83), PackedInt32Array(83, 85, 84), PackedInt32Array(89, 88, 90), PackedInt32Array(90, 88, 87), PackedInt32Array(92, 86, 91), PackedInt32Array(91, 86, 83), PackedInt32Array(90, 87, 85), PackedInt32Array(85, 87, 84), PackedInt32Array(94, 92, 93), PackedInt32Array(93, 92, 91), PackedInt32Array(95, 98, 96), PackedInt32Array(96, 98, 97), PackedInt32Array(95, 94, 98), PackedInt32Array(98, 94, 93), PackedInt32Array(89, 96, 88), PackedInt32Array(88, 96, 97), PackedInt32Array(10, 11, 99), PackedInt32Array(99, 11, 100), PackedInt32Array(104, 103, 101), PackedInt32Array(101, 103, 102), PackedInt32Array(108, 107, 105), PackedInt32Array(105, 107, 106), PackedInt32Array(110, 104, 109), PackedInt32Array(109, 104, 101), PackedInt32Array(105, 102, 108), PackedInt32Array(108, 102, 103), PackedInt32Array(110, 109, 112), PackedInt32Array(112, 109, 111), PackedInt32Array(113, 116, 114), PackedInt32Array(114, 116, 115), PackedInt32Array(113, 112, 116), PackedInt32Array(116, 112, 111), PackedInt32Array(107, 114, 106), PackedInt32Array(106, 114, 115), PackedInt32Array(0, 1, 117), PackedInt32Array(117, 1, 118), PackedInt32Array(121, 120, 119), PackedInt32Array(25, 26, 122), PackedInt32Array(126, 125, 123), PackedInt32Array(123, 125, 124), PackedInt32Array(127, 129, 128), PackedInt32Array(133, 132, 130), PackedInt32Array(130, 132, 131), PackedInt32Array(134, 127, 128), PackedInt32Array(126, 123, 134), PackedInt32Array(134, 123, 121), PackedInt32Array(133, 130, 122), PackedInt32Array(122, 130, 135), PackedInt32Array(137, 135, 136), PackedInt32Array(129, 127, 138), PackedInt32Array(138, 127, 139), PackedInt32Array(139, 127, 140), PackedInt32Array(140, 127, 137), PackedInt32Array(139, 142, 138), PackedInt32Array(138, 142, 141), PackedInt32Array(137, 136, 140), PackedInt32Array(121, 119, 134), PackedInt32Array(134, 119, 127), PackedInt32Array(122, 135, 25), PackedInt32Array(25, 135, 137), PackedInt32Array(143, 47, 48), PackedInt32Array(119, 120, 144), PackedInt32Array(144, 120, 145), PackedInt32Array(147, 146, 148), PackedInt32Array(152, 151, 149), PackedInt32Array(149, 151, 150), PackedInt32Array(143, 48, 147), PackedInt32Array(147, 48, 146), PackedInt32Array(155, 146, 153), PackedInt32Array(153, 146, 154), PackedInt32Array(154, 146, 145), PackedInt32Array(145, 146, 144), PackedInt32Array(152, 143, 151), PackedInt32Array(151, 143, 147), PackedInt32Array(155, 148, 146), PackedInt32Array(154, 157, 153), PackedInt32Array(153, 157, 156), PackedInt32Array(131, 132, 158), PackedInt32Array(158, 132, 20), PackedInt32Array(158, 20, 159), PackedInt32Array(159, 20, 21), PackedInt32Array(158, 159, 142), PackedInt32Array(142, 159, 161), PackedInt32Array(142, 161, 141), PackedInt32Array(141, 161, 160), PackedInt32Array(124, 125, 162), PackedInt32Array(162, 125, 160), PackedInt32Array(162, 160, 163), PackedInt32Array(163, 160, 161), PackedInt32Array(150, 164, 149), PackedInt32Array(149, 164, 82), PackedInt32Array(82, 164, 165), PackedInt32Array(82, 165, 81), PackedInt32Array(157, 162, 156), PackedInt32Array(156, 162, 164), PackedInt32Array(164, 162, 163), PackedInt32Array(164, 163, 165), PackedInt32Array(169, 168, 166), PackedInt32Array(166, 168, 167), PackedInt32Array(172, 171, 170), PackedInt32Array(117, 118, 173), PackedInt32Array(172, 170, 173), PackedInt32Array(173, 170, 117), PackedInt32Array(117, 170, 174), PackedInt32Array(175, 99, 100), PackedInt32Array(176, 178, 177), PackedInt32Array(175, 100, 176), PackedInt32Array(176, 100, 178), PackedInt32Array(178, 100, 179), PackedInt32Array(171, 177, 170), PackedInt32Array(170, 177, 178)]
geometry_parsed_geometry_type = 1
geometry_collision_mask = 4294901765
geometry_source_geometry_mode = 1
geometry_source_group_name = &"levelgeo"
cell_size = 0.15
cell_height = 0.05
agent_radius = 0.3
agent_max_climb = 0.3

[sub_resource type="Resource" id="Resource_l64y4"]
script = ExtResource("3_st76l")
unit_name = &"Charlie"
unit_desc = "A clay fella ready to fight."
unit_scene = ExtResource("4_o40yq")
metadata/_custom_type_script = "uid://c3vowodir5ulx"

[sub_resource type="Resource" id="Resource_3csm3"]
script = ExtResource("3_st76l")
unit_name = &"Blockade"
unit_desc = "A sturdy wall."
unit_scene = ExtResource("5_ipmlp")
metadata/_custom_type_script = "uid://c3vowodir5ulx"

[node name="RtsTesting" type="Node3D"]
script = SubResource("GDScript_o40yq")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_7f4sk")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.35957, -0.893565, -0.268795, -0.67883, 0.0528488, 0.732391, -0.640234, 0.445812, -0.625582, -0.000668406, -0.00451565, -0.000858784)
light_color = Color(0, 0, 0, 1)
light_angular_distance = 27.52
shadow_enabled = true

[node name="Swampypeasants" parent="." groups=["levelgeo"] instance=ExtResource("1_u5aq2")]

[node name="OmniLight3D" type="OmniLight3D" parent="Swampypeasants"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5.7, 0)
light_energy = 2.293
omni_range = 16.211
omni_attenuation = 1.202
script = SubResource("GDScript_pdplg")
flicker = 25

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="Swampypeasants"]
visible = false
navigation_mesh = SubResource("NavigationMesh_u5aq2")

[node name="CharacterBody3D" parent="." instance=ExtResource("6_o40yq")]
transform = Transform3D(-0.984899, 0, 0.173132, 0, 1, 0, -0.173132, 0, -0.984899, -4.92835, 1, -13.3459)

[node name="RtsInterface" parent="." instance=ExtResource("2_a31ti")]
_debug_units = Array[ExtResource("3_st76l")]([SubResource("Resource_l64y4"), SubResource("Resource_3csm3")])

[node name="Marker3D" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 9.63214, 11.9574)
